<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Java-Course</title>
        <style>
            .background
            {
                background-image: url("java_background.webp");
            }
            .title
            {
                position: relative;
                left: 25%;
                background-color: rgb(255, 255, 255);
                width: 50%;
                height: 50px;
                text-align: center;
                border: 5px solid black;
            }
            .level_number
            {
                position: absolute;
                left: 5%;
                top: 0%;
                background-color: rgb(255, 255, 255);
                width: 15%;
                height: 50px;
                text-align: center;
                border: 5px solid black;
            }
            .username_display
            {
                position: absolute;
                left: 80%;
                top: 0%;
                background-color: rgb(255, 0, 0);
                width: 15%;
                height: 50px;
                text-align: center;
                border: 5px solid rgb(255, 255, 255);
                color: white;
            }
            .info_text
            {
                position: absolute;
                left: 3%;
                top: 22%;
                background-color: rgb(255, 255, 255);
                width: 550px;
                height: 880px;
                border: 5px solid black;
                font-size: 20px;
            }
            .code_block 
            {
                width: 36%;
                height: 50%;
                background-color: rgb(255, 255, 255);
                border: 5px solid black;
                position: absolute;
                top: 22%; /* Move down from the top by 10 pixels */
                left: 52%; /* Move from the left by 20 pixels */
                display: block;
                font-size: 20px;
            }
            .output_block
            {
                width: 37%;
                height: 72%;
                background-color: rgb(255, 255, 255);
                border: 5px solid black;
                position: absolute;
                top: 83%; /* Move down from the top by 10 pixels */
                left: 52%; /* Move from the left by 20 pixels */
                display: block;
                font-size: 20px;
            }
            .output_label
            {
                width: 37%;
                height: 5%;
                background-color: rgb(255, 0, 0);
                border: 5px solid rgb(255, 255, 255);
                position: absolute;
                top: 73%; /* Move down from the top by 10 pixels */
                left: 52%; /* Move from the left by 20 pixels */
                display: block;
                text-align: center;
                font-size: 20px;
                font-weight: bold;
                color: white;
            }
            .input_label
            {
                width: 36%;
                height: 5%;
                background-color: rgb(255, 0, 0);
                border: 5px solid white;
                position: absolute;
                top: 12%; /* Move down from the top by 10 pixels */
                left: 52%; /* Move from the left by 20 pixels */
                display: block;
                text-align: center;
                font-size: 20px;
                font-weight: bold;
                color: white;
            }
            .lesson_label
            {
                width: 36%;
                height: 5%;
                background-color: rgb(255, 0, 0);
                border: 5px solid white;
                position: absolute;
                top: 12%; /* Move down from the top by 10 pixels */
                left: 5%; /* Move from the left by 20 pixels */
                display: block;
                text-align: center;
                font-size: 20px;
                font-weight: bold;
                color: white;
            }
            .run_button
            {
                position: absolute;
                top: 160%;
                left: 52%;
                background-color: rgb(255, 0, 0);
                width: 160px;
                height: 50px;
                text-align: center;
                padding: 5px;
                border: 5px solid rgb(255, 255, 255);
                font-family: "Comic Sans MS";
                font-size: 20px;
                color: white;
            }
            .home_button
            {
                position: absolute;
                top: 160%;
                left: 65%;
                background-color: rgb(255, 0, 0);
                width: 160px;
                height: 50px;
                text-align: center;
                padding: 5px;
                border: 5px solid rgb(255, 255, 255);
                font-family: "Comic Sans MS";
                font-size: 20px;
                color: white;
            }
            .next_level_button
            {
                position: absolute;
                top: 160%;
                left: 78%;
                background-color: rgb(255, 0, 0);
                width: 160px;
                height: 50px;
                text-align: center;
                padding: 5px;
                border: 5px solid rgb(255, 255, 255);
                font-family: "Comic Sans MS";
                font-size: 20px;
                color: white;
            }
            .next_level_button:hover, .home_button:hover, .run_button:hover
            {
                background-color: rgb(255, 136, 146);
                width: 160px;
                height: 50px;
                text-align: center;
                padding: 5px;
                border: 5px solid rgb(255, 255, 255);
                font-family: "Comic Sans MS";
                font-size: 20px;
                color: white;
            }
        </style>
    <script>
        function runCode() {
            const code = document.getElementById("codeInput").value;

            const payload = {
                script: code,
                language: "java",
                versionIndex: "4",
                clientId: "7020535108b6119bc7b2e57e7de75dde",
                clientSecret: "3c9dcbe700b40610615de7602bb1ac1e0d9c5a13899acb33b4e232bc944e19a7"
            };

            fetch("http://localhost:3000/run", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(payload)
            })
            .then(response => response.json())
            .then(data => {
                const expectedOutput = "Hello from JDoodle!\n";
                console.log("Output:", data);
                document.getElementById("outputContainer").innerText = data.output || "No output returned.";
                if ((data.output || "").trim() === expectedOutput.trim()){
                    alert('Correct Output!');
                }
                else{
                    alert('Incorrect Output. Please try again.');
                }
            })
            .catch(error => {
                console.error("Error:", error);
                document.getElementById("outputContainer").innerText = "An error occurred: " + error.message;
            });
            if (code.trim() === "") {
                document.getElementById("outputContainer").innerText = "Please enter some code to run.";
            } else {
                document.getElementById("outputContainer").innerText = "Running your code...";
            }
        }
    </script>
</head>
<body class = "background">
    <h1 class = "title">Java Lesson 1</h1>
    <h1 class = "level_number">1/5</h1>
    <h1 class = "username_display">Username</h1>
    <h2 class = "lesson_label">Lesson 1 - Intro to Java</h2>
    <div class = "info_text">
        Java is aslkdf aslkfjd aksdlaf jklsjda flkjsfda lkdja flkdajf ldsakfj lkasjd f
    </div>
    <textarea class = "code_block" id="codeInput" rows="10" cols="80">
public class Main {
    public static void main(String[] args) {
        System.out.println("Enter your code here");
    }
}
    </textarea><br>
    <button class = "run_button" onclick="runCode()">Run Code</button>
    <button class = "home_button" onclick="window.location.href='file:///M:/Web_Applications/Project.html'">Home</button>
    <button class = "next_level_button" onclick="window.location.href='file:///M:/Web_Applications/Codelingo_java.html'">Next Level</button>
    
    <h2 class = "input_label">Input:</h2>
    <h2 class = "output_label">Output:</h2>
    <textarea class = "output_block" id="outputContainer"></textarea>

</body>
</html>
